<!DOCTYPE html>  
<html>  
  <head>  
   <title>Classes</title>  
   <meta charset="UTF-8">  
   <meta name="viewport" content="width=device-width, initial-scale=1.0">  
   <link rel="shortcut icon" href="./assets/favicon.png" type="image/png">  
   <link rel="stylesheet" href="/assets/css/styles.css">  
   <link rel="stylesheet" href="/assets/css/index.css">  
   <script src="/global.js"></script>  
   <script src="/assets/js/favicon-handler.js"></script>  
   <script src="/assets/js/ads.js"></script>  
   <script src="/assets/js/onload.js"></script>  
   <script src="uv/uv.bundle.js"></script>  
   <script src="uv/uv.config.js"></script>  
   <script>  
    const stockSW = "/uv/sw.js";  
    const swAllowedHostnames = ["localhost", "127.0.0.1"];  
    function registerSW() {  
      if (!navigator.serviceWorker) {  
       if (location.protocol !== "https:" && !swAllowedHostnames.includes(location.hostname))  
        throw new Error("Service workers cannot be registered without https.");  
       throw new Error("Your browser doesn't support service workers.");  
      }  
      navigator.serviceWorker.register(stockSW);  
    }  
    registerSW();    
   </script>  
   <style>  
    #particles-js {  
      position: fixed;  
      top: 0;  
      left: 0;  
      width: 100%;  
      height: 100%;  
      z-index: -1;  
      pointer-events: none;  
    }  
  
    .container {  
      display: flex;  
      justify-content: center;  
      align-items: center;  
      height: 100vh;  
      padding: 0;  
      margin: 0;  
    }  
  
    .iframe-section {  
      width: 95%;  
      max-width: 1200px;  
      height: 80%;  
      display: flex;  
      flex-direction: column;  
      position: relative;  
    }  
  
    iframe {  
      flex: 1;  
      border: none;  
      border-radius: 15px;  
    }  
  
    @media (max-width: 800px) {  
      .iframe-section {  
       height: auto;  
       padding-bottom: 75%;  
      }  
  
      iframe {  
       height: 100%;  
      }  
    }  
  
    .title {  
      font-size: 1.5rem;  
      text-align: center;  
      color: #fff;  
      margin-bottom: 10px;  
      position: relative;  
      animation: slideIn 2s ease-in-out forwards;  
      opacity: 0;  
    }  
  
    @keyframes slideIn {  
      0% {  
       transform: translateY(-50px);  
       opacity: 0;  
      }  
      100% {  
       transform: translateY(0);  
       opacity: 1;  
      }  
    }  
  
    .flex-container {  
      display: flex;  
      position: relative;  
      flex-wrap: wrap;  
      justify-content: center;  
      gap: 20px;  
      padding: 5rem;  
    }  
  
    .game-wrapper {  
      display: inline-block;  
      margin: 20px;  
      width: calc(33.33% - 20px);  
    }  
  
    .game {  
      display: flex;  
      flex-direction: column;  
      align-items: center;  
      justify-content: center;  
      padding: 20px;  
      border-radius: 10px;  
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);  
    }  
  
    .game-image {  
      width: 100%;  
      height: 150px;  
      object-fit: cover;  
      border-radius: 10px 10px 0 0;  
    }  
  
    .game-info {  
      padding: 20px;  
      background-color: #f7f7f7;  
      border-radius: 0 0 10px 10px;  
    }  
  
    .game-title {  
      font-size: 18px;  
      margin-bottom: 10px;  
    }  
  
    .play-button {  
      background-color: #4CAF50;  
      color: #fff;  
      padding: 10px 20px;  
      border-radius: 10px;  
      text-decoration: none;  
      transition: background-color 0.3s ease-in-out;  
    }  
  
    .play-button:hover {  
      background-color: #3e8e41;  
    }  
  
    .random-game-button {  
      padding: 10px;  
      border-radius: 10px;  
      border: 2px solid #555555;  
      background: transparent;  
      color: white;  
      font-size: 1.2em;  
      margin: 20px;  
      width: 300px;  
    }  
   </style>  
  </head>  
  <body>  
   <h1> </h1>  
   <h1> </h1>  
   <div style="text-align: center;">  
    <input class="random-game-button" placeholder="Search for a game!" id="searchGames">  
    <button class="random-game-button" id="randomGameBtn">Random Game</button>  
   </div>  
  
   <!-- Google Tag Manager -->  
   <script>  
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],  
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=  
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  
    })(window,document,'script','dataLayer','GTM-PZXRTFX5');  
   </script>  
  
   <!-- Google Tag Manager (noscript) -->  
   <noscript>  
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PZXRTFX5"  
      height="0" width="0" style="display:none;visibility:hidden">  
    </iframe>  
   </noscript>  
  
   <div id="header"></div>  
   <div id="footer"></div>  
   <div class="flex-container" id="gamesList"></div>  
  
   <script>  
    loadHTML("/assets/html/header.html", "header");  
    loadHTML("/assets/html/footer.html", "footer");  
   </script>  
  
   <script type="module">  
    try {  
      const gamesList = document.getElementById("gamesList");  
      console.log("Found games list element:", gamesList);  
  
      // Wait for UV config  
      await new Promise(resolve => {  
       if (window.__uv$config) {  
        resolve();  
       } else {  
        const checkUV = setInterval(() => {  
          if (window.__uv$config) {  
           clearInterval(checkUV);  
           resolve();  
          }  
        }, 100);  
       }  
      });  
  
      console.log("UV config loaded:", window.__uv$config);  
  
      // Import games  
      const { gamesData } = await import("/assets/json/games.js");  
      const { games2Data } = await import("/assets/json/games2.js");  
       
      const games = [...gamesData, ...games2Data];  
  
      function loadGame(game) {  
       const gameElement = document.createElement("div");  
       gameElement.className = "game";  
  
       const imgElement = document.createElement("img");  
       imgElement.src = game.imgSrc;  
       imgElement.alt = game.title;  
       imgElement.className = "game-image";  
  
       const titleElement = document.createElement("div");  
       titleElement.className = "game-info";  
       titleElement.innerHTML = `  
        <h2 class="game-title">${game.title}</h2>  
        <a href="javascript:void(0)" class="play-button" onclick="(function(e) {  
          e.stopPropagation();  
          localStorage.setItem('loadedG', '${game.link}');  
          location.href = '/Classes.html';  
        })(event)">Play</a>  
       `;  
  
       gameElement.appendChild(imgElement);  
       gameElement.appendChild(titleElement);  
  
       gameElement.onclick = () => {  
        localStorage.setItem("loadedG", game.link);  
        location.href = "/Classes.html";  
       };  
  
       // Add a wrapper element to change the layout  
       const wrapperElement = document.createElement("div");  
       wrapperElement.className = "game-wrapper";  
       wrapperElement.appendChild(gameElement);  
  
       gamesList.appendChild(wrapperElement);  
      }  
  
      // Load all games initially  
      console.log("Starting to load games...");  
      if (Array.isArray(games)) {  
       games.forEach(game => {  
        loadGame(game);  
       });  
      } else {  
       console.error("Games is not an array:", games);  
       gamesList.innerHTML = '<div style="color: white;">Error: Games data is not in the correct format</div>';  
      }  
  
      // Setup search functionality  
      document.getElementById("searchGames").addEventListener("keyup", function (e) {  
       gamesList.innerHTML = '';  
       const searchTerm = this.value.toLowerCase();  
       for (const game of games) {  
        if (game.title.toLowerCase().includes(searchTerm)) {  
          loadGame(game);  
        }  
       }  
      });  
      document.getElementById("randomGameBtn").addEventListener("click", function() {  
       const randomGame = games[Math.floor(Math.random() * games.length)];  
       localStorage.setItem("loadedG", randomGame.link);  
       location.href = "/Classes.html";  
      });  
  
    } catch (error) {  
      console.error("Error loading games:", error);  
      document.getElementById("gamesList").innerHTML = `<div style="color: white;">Error loading games: ${error.message}</div>`;  
    }  
   </script>  
  </body>  
</html>
